$(document).ready(function(){var n={activate:function(n){$('.nav-tabs a[href="#'+n+'"]').tab("show")}},e={arrange:function(){$(".form-users .user").each(function(n){$(this).find("input").each(function(){var e=$(this),r=e.attr("name");e.attr("name",r.replace(/s\[(\d)]/,"s["+n+"]"))}).end()})},add:function(){var n=$(".users"),r=n.find(".user").last(),t=$(".hidden .user").clone(!0);if(r.length){var a=r.find("input").first();""!==a.val()?(n.append(t),e.arrange()):a.focus()}else n.append(t),e.arrange();return!1},del:function(){var n=$(this),r=n.closest(".user"),t=function(n){n.remove(),e.arrange()};if(e.check(r))var a=bootbox.confirm("Are you sure?",function(n){n&&(a.modal("hide"),t(r))});else t(r);return!1},check:function(n){var e=/^([a-zA-Z]|\d){6,32}$/,r=!0;return n.find(".form-control").each(function(){r&&(r=e.test($(this).val()),r||$(this).focus())}),r},submit:function(){return e.check($(this))}};"#users"==window.location.hash&&n.activate("users"),window.location.hash="",$(".form-users").on("submit",e.submit).on("click",".user-del",e.del),$(".form-psk").on("submit",function(){var n=$(".psk");return""==n.val()?(n.focus(),!1):!0}),$(".user-add").on("click",e.add)});